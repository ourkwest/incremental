#!/usr/bin/env bash

mkdir -p ~/.incremental

start() {
  cd $(dirname $0)/..
  echo $(pwd)
  echo "incremental will be running shortly..."
  lein run &
}

instruct() {
  echo $@ >> ~/.incremental/instructions
}

case "$1" in
  add)    instruct "+ $(pwd)";;
  remove) instruct "- $(pwd)";;
  stop)   instruct "! Cease.";;
  start)  start;;
  "")     start;;
  *)      echo "Usage: inc [add|remove|start|stop] (defaults to start if no arg passed)"; exit 1;;
esac

